<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <title data-i18n="eat-kano"></title>

  <!-- Meta -->
  <meta name="viewport"
        content="initial-scale=1, user-scalable=no, minimum-scale=1.0,
                 maximum-scale=1.0, width=device-width,target-densitydpi=device-dpi" />

  <!-- OGP / 検索情報 -->
  <meta itemprop="name"        content="Eat Kano" />
  <meta itemprop="description" content="新概念音ゲー" />

  <!-- CSS & ライブラリ -->
  <link  href="./static/index.css" rel="stylesheet" />
  <link  href="https://lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/twitter-bootstrap/5.1.1/css/bootstrap.min.css"
         rel="stylesheet" />
  <script src="https://lf26-cdn-tos.bytecdntp.com/cdn/expire-1-M/jquery/3.6.0/jquery.min.js"></script>
  <script src="https://lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/twitter-bootstrap/5.1.1/js/bootstrap.bundle.min.js"></script>
  <script src="https://code.createjs.com/1.0.0/createjs.min.js"></script>

  <!-- Supabase JS SDK -->
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

  <!-- ゲームロジック（Supabase 対応済み） -->
  <script src="./static/index.js"></script>
</head>

<body onload="init()" oncontextmenu="return false">
  <!-- スコア画面 -->
  <div id="GameScoreLayer" class="BBOX SHADE bgc1" style="display:none;">
    <div class="p-4" style="margin-top:200px;background:rgba(125,181,216,.3);">
      <div id="GameScoreLayer-text"></div>

      <div class="mb-2 d-flex justify-content-center">
        <span class="col-3">CPS</span><span id="cps" class="col-2"></span>
      </div>
      <div id="GameScoreLayer-score" class="mb-2 d-flex justify-content-center">
        <span class="col-3" data-i18n="score"></span><span id="score" class="col-2"></span>
      </div>
      <div id="GameScoreLayer-bast" class="mb-2 d-flex justify-content-center">
        <span class="col-3" data-i18n="best"></span><span id="best" class="col-2"></span>
      </div>

      <button id="replay" class="btn btn-secondary btn-lg" onclick="replayBtn()" data-i18n="again"></button>
      <button          class="btn btn-secondary btn-lg" onclick="location.reload()" data-i18n="home"></button>
      <button          class="btn btn-secondary btn-lg" onclick="location.href='https://github.com/arcxingye/EatKano'"
                       data-i18n="repo"></button>
    </div>
  </div>

  <!-- ウェルカムレイヤー -->
  <div id="welcome" class="SHADE BOX-M">
    <div class="welcome-bg FILL"></div>
    <div class="FILL BOX-M" style="position:absolute;inset:0;z-index:5;">
      <div class="container">

        <!-- タイトル & 説明 -->
        <div class="container mb-5">
          <div class="text-warning" style="font-size:2.6em;" data-i18n="game-title"></div><br>
          <div id="desc" class="text-white" style="font-size:2.2em;line-height:1.5em;">
            <span data-i18n="game-intro1"></span><br>
            <span data-i18n="game-intro2"></span><br>
          </div>
        </div>

        <!-- ボタン類 -->
        <div id="btn_group" class="container text-nowrap">
          <div class="d-flex flex-column align-items-center">

            <a class="btn btn-primary btn-lg mb-3" onclick="readyBtn()" data-i18n="start"></a>

            <div class="dropdown mb-3 w-100">
              <a id="mode" class="btn btn-secondary btn-lg w-100" href="javascript:void(0);"
                 data-bs-toggle="dropdown" data-i18n="normal"></a>
              <ul class="dropdown-menu" aria-labelledby="mode">
                <li><a class="dropdown-item" onclick="changeMode(MODE_NORMAL)"  data-i18n="normal"></a></li>
                <li><a class="dropdown-item" onclick="changeMode(MODE_ENDLESS)" data-i18n="endless"></a></li>
                <li><a class="dropdown-item" onclick="changeMode(MODE_PRACTICE)" data-i18n="practice"></a></li>
              </ul>
            </div>

            <!-- ⇩ ランキングページへのリンク -->
            <a href="/leaderboard.html" class="btn btn-success btn-lg mb-3" data-i18n="rank">RANK</a>

            <a class="btn btn-secondary btn-lg" onclick="show_setting()" data-i18n="settings"></a>
          </div>
        </div>

        <!-- 設定パネル -->
        <div id="setting" class="container" style="display:none;">
          <!-- 名前 -->
          <div class="input-group mb-3">
            <span class="input-group-text col-3" data-i18n="name"></span>
            <input id="username" type="text" class="form-control" placeholder="name">
          </div>
          <!-- コメント -->
          <div class="input-group mb-3">
            <span class="input-group-text col-3" data-i18n="comment"></span>
            <input id="message" type="text" class="form-control" placeholder="comment">
          </div>

          <!-- 画像カスタム / サウンド -->
          <div class="mb-3 btn-group">
            <a class="btn btn-secondary me-1" onclick="getClickBeforeImage()" data-i18n="img-before"></a>
            <input id="click-before-image" type="file" accept="image/*" class="d-none" onchange="saveClickBeforeImage()">
            <a class="btn btn-secondary me-1" onclick="getClickAfterImage()"  data-i18n="img-after"></a>
            <input id="click-after-image" type="file" accept="image/*"  class="d-none" onchange="saveClickAfterImage()">
            <a id="sound" class="btn btn-secondary" onclick="changeSoundMode()"></a>
          </div>

          <!-- キー・時間など -->
          <div class="input-group mb-3">
            <span class="input-group-text col-3" data-i18n="key"></span>
            <input id="keyboard" type="text" class="form-control" maxlength="4" placeholder="DFJK">
          </div>
          <div class="input-group mb-3">
            <span class="input-group-text col-3" data-i18n="time"></span>
            <input id="gameTime" type="text" class="form-control" maxlength="4" placeholder="20">
          </div>

          <button class="btn btn-secondary btn-lg" onclick="show_btn();save_cookie();" data-i18n="ok"></button>
        </div>
      </div>
    </div>
  </div>
</body>
</html>
